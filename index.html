<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Name | Senior iOS Engineer</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React and ReactDOM libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel to compile JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Lottie Player for animations -->
    <script src="https://unpkg.com/@lottiefiles/dotlottie-wc@0.6.2/dist/dotlottie-wc.js" type="module"></script>

    <!-- Firebase SDKs (Compat version for script tag usage) -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <style>
        /* A simple font to match the elegant theme */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            /* Add padding to the top to prevent content from being hidden by the fixed header */
            padding-top: 72px; 
        }

        /* Animation classes for the carousel */
        .slide-out-left { transform: translateX(-25px); opacity: 0; }
        .slide-in-from-right { transform: translateX(25px); opacity: 0; }
        .slide-out-right { transform: translateX(25px); opacity: 0; }
        .slide-in-from-left { transform: translateX(-25px); opacity: 0; }
    </style>
</head>
<body>
    <!-- This is where our React app will be rendered -->
    <div id="root"></div>

    <!-- Our React code goes inside this script tag with type="text/babel" -->
    <script type="text/babel">
        // Your Firebase project configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDuxF-OYcps8e4NudAoexd5Ik6ZcDFgYGw",
            authDomain: "portfolio-website-b6bf2.firebaseapp.com",
            projectId: "portfolio-website-b6bf2",
            storageBucket: "portfolio-website-b6bf2.appspot.com",
            messagingSenderId: "11911323854",
            appId: "1:11911323854:web:3c16316b0760515483f09f",
            measurementId: "G-ZVYTBP6ETD"
        };

        let db;
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.firestore();
        } catch (error) {
            console.error("Firebase initialization error:", error);
            const rootElement = document.getElementById('root');
            rootElement.innerHTML = '<div class="min-h-screen flex items-center justify-center text-red-500">Error: Could not connect to Firebase. Please check your firebaseConfig keys.</div>';
        }

        const { useState, useEffect } = React;

        // -- SVG ICONS AS REACT COMPONENTS -- //
        const iconPaths = {
            Mail: <><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></>,
            Linkedin: <><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect width="4" height="12" x="2" y="9"></rect><circle cx="4" cy="4" r="2"></circle></>,
            Github: <><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path><path d="M9 18c-4.51 2-5-2-7-2"></path></>,
            Apple: <><path d="M17.13,21.52a5.06,5.06,0,0,1-1.69.32,4.3,4.3,0,0,1-3.33-1.75,4.3,4.3,0,0,1-3.33,1.75,5,5,0,0,1-1.81-.36c-1.45-.48-2.81-1.89-3.65-3.81A10.33,10.33,0,0,1,5.5,11.2a9.64,9.64,0,0,1,4.3-2.35,5.13,5.13,0,0,1,2.09-.41,1.5,1.5,0,0,1,.12,0,4.72,4.72,0,0,1,2.15.41,10.89,10.89,0,0,1,4.42,2.56,1.4,1.4,0,0,0,1,.48,1.36,1.36,0,0,0,1.08-.56,1.38,1.38,0,0,0-.2-1.94,13.1,13.1,0,0,0-5.65-3.1,5.4,5.4,0,0,0-2.87-.59,10.74,10.74,0,0,0-5.49,1.51,11.25,11.25,0,0,0-4,5.3,10.43,10.43,0,0,0,1,6.6,5.3,5.3,0,0,0,4.42,2.58,4.5,4.5,0,0,0,3.33-1.59,4.5,4.5,0,0,0,3.33,1.59,4.92,4.92,0,0,0,2.5-.69c1.25-.56,2.25-1.56,2.81-2.92a1.39,1.39,0,0,0-2.62-1.07,5.5,5.5,0,0,1-1.63,2.21Z"/><path d="M13.88,4.12a4.6,4.6,0,0,1,2,3.8,4.32,4.32,0,0,1-2.49,3.75,4.5,4.5,0,0,1-4.24-2.11,4.32,4.32,0,0,1,2.49-3.75A4.54,4.54,0,0,1,13.88,4.12Z"/></>,
            Swift: <path d="m24.698 16.885c.063-.126.063-.252.126-.377 1.512-5.923-2.08-12.853-8.254-16.507 1.952 2.446 3.132 5.582 3.132 8.995 0 1.032-.108 2.038-.313 3.009l.017-.095c-.087.39-.195.728-.33 1.052l.015-.041c-.2-.111-.365-.215-.524-.327l.019.012c-4.757-3.149-8.901-6.575-12.651-10.389l-.011-.011c2.438 3.602 4.965 6.75 7.722 9.678l-.036-.039c-4.121-2.64-7.702-5.378-11.039-8.381l.076.067c.474.784.972 1.463 1.524 2.093l-.014-.017c3.3 4.423 6.99 8.272 11.099 11.626l.117.092c-3.213 1.955-7.687 2.08-12.224 0-1.203-.57-2.236-1.2-3.195-1.923l.046.033c2.022 3.147 4.88 5.601 8.261 7.079l.12.047c1.693.839 3.687 1.331 5.796 1.331s4.103-.491 5.874-1.365l-.078.035h.064c.146-.065.271-.15.378-.252h-.001c1.512-.756 4.474-1.573 6.112 1.573.44.882 1.259-3.213-1.827-6.994z"/>,
            Flutter: <path fill-rule="nonzero" d="M13.503 2.001l-10 10 3.083 3.083 13.08-13.083h-6.163zm-.006 9.198L8.122 16.62 13.494 22h6.189l-5.387-5.4 5.389-5.4h-6.188z"/>,
            React: <><circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path></>,
            Server: <><rect width="20" height="8" x="2" y="2" rx="2" ry="2"></rect><rect width="20" height="8" x="2" y="14" rx="2" ry="2"></rect><line x1="6" x2="6.01" y1="6" y2="6"></line><line x1="6" x2="6.01" y1="18" y2="18"></line></>,
            ArrowRight: <><line x1="5" x2="19" y1="12" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></>,
            ArrowLeft: <><line x1="19" x2="5" y1="12" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></>,
            Briefcase: <><rect width="20" height="14" x="2" y="7" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></>,
            Award: <><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></>,
            CheckCircle: <><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></>,
            Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>,
            Menu: <><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></>,
            X: <><line x1="18" x2="6" y1="6" y2="18"/><line x1="6" x2="18" y1="6" y2="18"/></>,
            Search: <path d="M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"></path>,
        };

        const Icon = ({ name, className }) => {
            const pathData = iconPaths[name];
            if (!pathData) return null;

            const svgProps = {
                xmlns: "http://www.w3.org/2000/svg",
                width: "24",
                height: "24",
                viewBox: "0 0 24 24",
                className: className,
            };

            if (name === 'Apple' || name === 'Swift' || name === 'Search' || name === 'Flutter') {
                svgProps.fill = "currentColor";
            } else {
                svgProps.fill = "none";
                svgProps.stroke = "currentColor";
                svgProps.strokeWidth = "2";
                svgProps.strokeLinecap = "round";
                svgProps.strokeLinejoin = "round";
            }
            
            if (name === 'React') {
                svgProps.strokeWidth = "1";
            }
            
            if (name === 'Swift' || name === 'Flutter') {
                svgProps.viewBox = "0 0 32 32";
            }

            return (
                <svg {...svgProps}>
                    {pathData}
                </svg>
            );
        };


        // -- REACT COMPONENTS -- //

        const Header = ({ name, social }) => {
            const [isMenuOpen, setIsMenuOpen] = React.useState(false);

            const navLinks = [
                { href: '#achievements', label: 'Achievements' },
                { href: '#projects', label: 'Projects' },
                { href: '#experience', label: 'Experience' },
                
                { href: '#contact', label: 'Contact' }
            ];

            return (
                <>
                    <header className="fixed top-0 left-0 right-0 bg-white/80 backdrop-blur-sm z-40 border-b border-stone-200 h-18">
                        <div className="container mx-auto px-6 h-full flex justify-between items-center">
                            <a href="#hero" className="text-xl font-bold text-stone-800 tracking-wider">{name ? name.split(' ')[0] : ''}</a>
                            
                            <nav className="hidden md:flex items-center space-x-2">
                                {navLinks.map(link => (
                                    <a key={link.href} href={link.href} className="text-base font-medium text-stone-600 hover:text-teal-600 transition-colors px-3 py-2 rounded-md">{link.label}</a>
                                ))}
                            </nav>

                             <div className="hidden md:flex items-center space-x-4">
                                <a href={social?.github} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors">
                                    <Icon name="Github" className="w-6 h-6" />
                                </a>
                                <a href={social?.linkedin} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors">
                                    <Icon name="Linkedin" className="w-6 h-6" />
                                </a>
                            </div>

                            <button onClick={() => setIsMenuOpen(true)} className="md:hidden text-stone-600 hover:text-teal-600">
                                <Icon name="Menu" className="w-7 h-7" />
                            </button>
                        </div>
                    </header>

                    {/* Mobile Menu Overlay */}
                    <div className={`fixed inset-0 bg-white z-50 transform ${isMenuOpen ? 'translate-x-0' : 'translate-x-full'} transition-transform duration-300 ease-in-out`}>
                        <div className="container mx-auto px-6 h-full flex flex-col">
                            <div className="flex justify-between items-center h-18 border-b border-stone-200">
                                <a href="#hero" onClick={() => setIsMenuOpen(false)} className="text-xl font-bold text-stone-800 tracking-wider">{name ? name.split(' ')[0] : ''}</a>
                                <button onClick={() => setIsMenuOpen(false)} className="text-stone-600 hover:text-teal-600">
                                    <Icon name="X" className="w-8 h-8" />
                                </button>
                            </div>
                            <nav className="flex flex-col items-center justify-center flex-grow space-y-8">
                                {navLinks.map(link => (
                                    <a key={link.href} href={link.href} onClick={() => setIsMenuOpen(false)} className="text-2xl font-medium text-stone-800 hover:text-teal-600 transition-colors">{link.label}</a>
                                ))}
                            </nav>
                             <div className="flex items-center justify-center space-x-6 pb-12">
                                <a href={social?.github} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors">
                                    <Icon name="Github" className="w-8 h-8" />
                                </a>
                                <a href={social?.linkedin} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors">
                                    <Icon name="Linkedin" className="w-8 h-8" />
                                </a>
                            </div>
                        </div>
                    </div>
                </>
            );
        };

        const Hero = ({ name, title, bio, email, skills, avatarUrl }) => {
            const [isMounted, setIsMounted] = useState(false);
            useEffect(() => {
                const timer = setTimeout(() => setIsMounted(true), 100);
                return () => clearTimeout(timer);
            }, []);

            return (
                <section id="hero" className="min-h-screen flex items-center bg-white text-stone-800 -mt-[72px]">
                    <div className="container mx-auto px-6">
                        <div className="flex flex-col-reverse md:flex-row items-center justify-between gap-12">
                            <div className="md:w-3/5 text-center md:text-left">
                                <h1 className="text-4xl md:text-6xl font-extrabold leading-tight mb-4">
                                    <span className="text-stone-500">Hi, I'm {name}.</span>
                                    <br />
                                    A {title}.
                                </h1>
                                <p className="text-lg md:text-xl text-stone-600 mb-8 max-w-2xl mx-auto md:mx-0">
                                    {bio}
                                </p>
                                
                                <div className="mb-10">
                                    <h3 className="text-sm font-semibold text-stone-500 uppercase tracking-wider mb-4">Core Technologies</h3>
                                    <div className="flex flex-wrap gap-3 justify-center md:justify-start">
                                        {skills.map((skill, index) => (
                                        <div key={index} className="flex items-center bg-stone-100 py-2 px-4 rounded-full transition-all hover:bg-stone-200 hover:-translate-y-1">
                                            <div className="text-teal-600 mr-2.5"><Icon name={skill.icon} className="w-5 h-5" /></div>
                                            <span className="text-stone-700 font-medium text-sm">{skill.name}</span>
                                        </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 justify-center md:justify-start">
                                    <a href="#projects" className="bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-6 rounded-lg text-center transition-transform transform hover:scale-105 flex items-center justify-center">
                                        View My Work <Icon name="ArrowRight" className="ml-2 w-5 h-5" />
                                    </a>
                                    <a href={`mailto:${email}`} className="bg-white hover:bg-stone-100 text-stone-700 font-bold py-3 px-6 rounded-lg text-center transition-colors border border-stone-300 flex items-center justify-center">
                                        Get In Touch <Icon name="Mail" className="ml-2 w-5 h-5" />
                                    </a>
                                </div>
                            </div>
                            <div className="md:w-2/5">
                                <img 
                                    src={avatarUrl} 
                                    alt="Your Name" 
                                    className={`w-64 h-64 md:w-80 md:h-80 rounded-full object-cover mx-auto shadow-lg border-4 border-stone-200 transition-all duration-1000 ease-out ${isMounted ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`} 
                                />
                            </div>
                        </div>
                    </div>
                </section>
            );
        };

        const Achievements = ({ achievements }) => {
            const itemsPerPage = 3;
            const totalPages = Math.ceil(achievements.length / itemsPerPage);
            const [currentPage, setCurrentPage] = React.useState(1);
            const [animationClass, setAnimationClass] = React.useState('');

            const handlePageChange = (newPage) => {
                if (newPage === currentPage || newPage < 1 || newPage > totalPages) return;
                const direction = newPage > currentPage ? 'left' : 'right';
                setAnimationClass(`slide-out-${direction}`);
                setTimeout(() => {
                    setCurrentPage(newPage);
                    setAnimationClass(`slide-in-from-${direction === 'left' ? 'right' : 'left'}`);
                    setTimeout(() => setAnimationClass(''), 150);
                }, 150);
            };

            const currentItems = achievements.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

            const renderAchievement = (ach, index) => (
                <div key={index} className="bg-white border border-stone-200 p-6 rounded-lg transition-all duration-300 hover:shadow-lg hover:-translate-y-1 group h-full">
                    <div className="flex items-start space-x-4">
                        <div className="flex-shrink-0 text-teal-600 mt-1">
                            <Icon name={ach.icon} className="w-6 h-6" />
                        </div>
                        <div className="flex-grow">
                            <h3 className="font-bold text-stone-800">{ach.title}</h3>
                            <p className="text-stone-600 text-sm mt-1">{ach.description}</p>
                            <a href={ach.url} target="_blank" rel="noopener noreferrer" className="inline-flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700 mt-3">
                                View Proof <Icon name="ArrowRight" className="ml-1 w-4 h-4" />
                            </a>
                        </div>
                    </div>
                </div>
            );

            let layout;
            if (achievements.length < 4) {
                let gridClasses = "grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto";
                if (achievements.length === 1) {
                    gridClasses = "flex justify-center max-w-md mx-auto";
                } else if (achievements.length === 2) {
                    gridClasses = "grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl mx-auto";
                }
                layout = (
                    <div className={gridClasses}>
                        {achievements.map(renderAchievement)}
                    </div>
                );
            } else {
                layout = (
                    <>
                        <div className="relative">
                            <div className="overflow-hidden">
                                <div className={`grid grid-cols-1 md:grid-cols-3 gap-8 transition-all duration-300 ${animationClass}`}>
                                    {currentItems.map(renderAchievement)}
                                </div>
                            </div>
                            {totalPages > 1 && currentPage > 1 && (
                                <button onClick={() => handlePageChange(currentPage - 1)} className="absolute top-1/2 -left-4 md:-left-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10">
                                    <Icon name="ArrowLeft" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                            {totalPages > 1 && currentPage < totalPages && (
                                <button onClick={() => handlePageChange(currentPage + 1)} className="absolute top-1/2 -right-4 md:-right-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10">
                                    <Icon name="ArrowRight" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                        </div>
                        {totalPages > 1 && (
                            <div className="flex justify-center items-center mt-12 space-x-2">
                                {Array.from({ length: totalPages }).map((_, i) => (
                                    <button key={i} onClick={() => handlePageChange(i + 1)} className={`w-3 h-3 rounded-full transition-colors ${currentPage === i + 1 ? 'bg-teal-600' : 'bg-stone-300 hover:bg-stone-400'}`}></button>
                                ))}
                            </div>
                        )}
                    </>
                );
            }

            return (
                <section id="achievements" className="py-20 bg-stone-50 border-t border-stone-200">
                    <div className="container mx-auto px-6">
                        <h2 className="text-3xl font-bold text-center text-stone-800 mb-12">Key Achievements</h2>
                        {layout}
                    </div>
                </section>
            );
        };

        const PaginatedSection = ({ items, renderItem, sectionId, title, bgColor = 'bg-white' }) => {
            const [currentPage, setCurrentPage] = React.useState(1);
            const [animationClass, setAnimationClass] = React.useState('');
            const itemsPerPage = 3;
            const totalPages = Math.ceil(items.length / itemsPerPage);
            
            const handlePageChange = (newPage) => {
                if (newPage === currentPage || newPage < 1 || newPage > totalPages) return;
                
                const direction = newPage > currentPage ? 'left' : 'right';
                setAnimationClass(`slide-out-${direction}`);

                setTimeout(() => {
                    setCurrentPage(newPage);
                    setAnimationClass(`slide-in-from-${direction === 'left' ? 'right' : 'left'}`);
                    setTimeout(() => setAnimationClass(''), 150);
                }, 150);
            };

            const currentItems = items.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

            return (
                <section id={sectionId} className={`py-20 ${bgColor} border-t border-stone-200`}>
                    <div className="container mx-auto px-6">
                        <h2 className="text-3xl font-bold text-center text-stone-800 mb-12">{title}</h2>
                        <div className="relative">
                            <div className="overflow-hidden">
                                <div className={`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 transition-all duration-300 ${animationClass}`}>
                                    {currentItems.map((item, index) => (
                                        <div key={index}>
                                            {renderItem(item)}
                                        </div>
                                    ))}
                                </div>
                            </div>
                            {totalPages > 1 && currentPage > 1 && (
                                <button
                                    onClick={() => handlePageChange(currentPage - 1)}
                                    className="absolute top-1/2 -left-4 md:-left-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10"
                                >
                                    <Icon name="ArrowLeft" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                             {totalPages > 1 && currentPage < totalPages && (
                                <button
                                    onClick={() => handlePageChange(currentPage + 1)}
                                    className="absolute top-1/2 -right-4 md:-right-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10"
                                >
                                    <Icon name="ArrowRight" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                        </div>
                        {totalPages > 1 && (
                            <div className="flex justify-center items-center mt-12 space-x-2">
                                {Array.from({ length: totalPages }).map((_, i) => (
                                    <button 
                                        key={i} 
                                        onClick={() => handlePageChange(i + 1)}
                                        className={`w-3 h-3 rounded-full transition-colors ${currentPage === i + 1 ? 'bg-teal-600' : 'bg-stone-300 hover:bg-stone-400'}`}
                                    ></button>
                                ))}
                            </div>
                        )}
                    </div>
                </section>
            );
        };

        const ProjectCard = (project) => (
            <div className="bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm h-full flex flex-col group">
                <img src={project.imageUrl} alt={project.title} className="w-full h-48 object-cover" />
                <div className="p-6 flex flex-col flex-grow">
                    <h3 className="text-xl font-bold text-stone-800 mb-2">{project.title}</h3>
                    <p className="text-stone-600 mb-4 flex-grow">{project.description}</p>
                    <div className="mb-4">
                        {project.tags.map((tag, i) => (
                        <span key={i} className="inline-block bg-teal-50 text-teal-800 text-xs font-semibold mr-2 mb-2 px-2.5 py-1 rounded-full">{tag}</span>
                        ))}
                    </div>
                    <div className="mt-auto pt-4 border-t border-stone-200 flex justify-between items-center">
                        <a href={project.repoUrl} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors flex items-center z-10">
                            <Icon name="Github" className="w-5 h-5 mr-2"/> Source
                        </a>
                        <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" className="text-stone-500 hover:text-teal-600 transition-colors flex items-center z-10">
                            <Icon name="ArrowRight" className="w-5 h-5 mr-2"/> Live Demo
                        </a>
                    </div>
                </div>
            </div>
        );

        const BlogCard = (post) => (
             <a href={post.url} target="_blank" rel="noopener noreferrer" className="block bg-white border border-stone-200 rounded-lg overflow-hidden shadow-sm h-full group">
                <img src={post.imageUrl} alt={post.title} className="w-full h-48 object-cover" />
                <div className="p-6">
                    <h3 className="text-xl font-bold text-stone-800 mb-2">{post.title}</h3>
                    <p className="text-stone-600 mb-4">{post.description}</p>
                    <div>
                        {post.tags.map((tag, i) => (
                        <span key={i} className="inline-block bg-teal-50 text-teal-800 text-xs font-semibold mr-2 mb-2 px-2.5 py-1 rounded-full">{tag}</span>
                        ))}
                    </div>
                </div>
            </a>
        );
        
        const Experience = ({ experience }) => (
            <section id="experience" className="py-20 bg-stone-50 border-t border-stone-200">
                <div className="container mx-auto px-6">
                    <h2 className="text-3xl font-bold text-center text-stone-800 mb-16">Work Experience</h2>
                    <div className="relative max-w-3xl mx-auto">
                        <div className="absolute left-0 md:left-1/2 top-0 h-full w-0.5 bg-stone-200 ml-4 md:ml-0 md:-translate-x-1/2"></div>
                        {experience.map((job, index) => (
                        <div key={index} className="relative pl-12 md:pl-0 mb-12">
                            <div className="md:flex md:items-center" style={{ flexDirection: index % 2 === 0 ? 'row' : 'row-reverse' }}>
                                <div className="md:w-1/2">
                                    <div className={`text-left ${index % 2 === 0 ? 'md:text-right md:pr-8' : 'md:text-left md:pl-8'}`}>
                                        <p className="text-teal-600 font-semibold">{job.duration}</p>
                                        <h3 className="text-xl font-bold text-stone-800 mt-1">{job.role}</h3>
                                        <p className="text-stone-500">{job.company}</p>
                                    </div>
                                </div>
                                <div className="md:w-1/2 mt-4 md:mt-0">
                                    <div className={`relative bg-white p-6 rounded-lg shadow-md border border-stone-200 ${index % 2 === 0 ? 'md:ml-8' : 'md:mr-8'}`}>
                                        <div className={`absolute top-3 w-4 h-4 bg-white border-stone-200 transform ${index % 2 === 0 ? 'left-0 -translate-x-1/2 border-t-0 border-r-0 border-b-2 border-l-2 rotate-[45deg]' : 'right-0 translate-x-1/2 border-b-0 border-l-0 border-t-2 border-r-2 rotate-[-315deg]'}`}></div>
                                        <p className="text-stone-600 mb-4">{job.description}</p>
                                        <ul className="space-y-2">
                                            {job.responsibilities.map((resp, i) => (
                                            <li key={i} className="flex items-start">
                                                <Icon name="CheckCircle" className="w-4 h-4 text-teal-500 mr-2 mt-1 flex-shrink-0" />
                                                <span className="text-stone-500 text-sm">{resp}</span>
                                            </li>
                                            ))}
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div className="absolute left-0 md:left-1/2 top-1 w-8 h-8 bg-white border-4 border-stone-50 rounded-full flex items-center justify-center ml-4 md:ml-0 -translate-x-1/2">
                                <Icon name="Briefcase" className="w-4 h-4 text-teal-600" />
                            </div>
                        </div>
                        ))}
                    </div>
                </div>
            </section>
        );

        const Certifications = ({ certifications }) => {
             const itemsPerPage = 3;
            const totalPages = Math.ceil(certifications.length / itemsPerPage);
            const [currentPage, setCurrentPage] = React.useState(1);
            const [animationClass, setAnimationClass] = React.useState('');

            const handlePageChange = (newPage) => {
                if (newPage === currentPage || newPage < 1 || newPage > totalPages) return;
                const direction = newPage > currentPage ? 'left' : 'right';
                setAnimationClass(`slide-out-${direction}`);
                setTimeout(() => {
                    setCurrentPage(newPage);
                    setAnimationClass(`slide-in-from-${direction === 'left' ? 'right' : 'left'}`);
                    setTimeout(() => setAnimationClass(''), 150);
                }, 150);
            };

            const currentItems = certifications.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage);

            const renderCertification = (cert, index) => (
                 <div key={index} className="bg-white border border-stone-200 p-6 rounded-lg transition-all duration-300 hover:shadow-lg hover:-translate-y-1 group h-full">
                    <div className="flex items-start space-x-4">
                        <div className="relative flex-shrink-0 w-12 h-12">
                            <div className="absolute inset-0 transition-opacity duration-300 group-hover:opacity-0">
                                <Icon name={cert.icon} className="w-full h-full text-teal-600" />
                            </div>
                            <img src={cert.imageUrl} alt={cert.name} className="absolute inset-0 w-full h-full rounded-full object-cover opacity-0 transition-opacity duration-300 group-hover:opacity-100" />
                        </div>
                        <div className="flex-grow">
                            <h3 className="font-bold text-stone-800 text-lg">{cert.name}</h3>
                            <p className="text-stone-500">{cert.issuer} - {cert.year}</p>
                             <a href={cert.url} target="_blank" rel="noopener noreferrer" className="inline-flex items-center text-sm font-semibold text-teal-600 hover:text-teal-700 mt-2">
                                View Proof <Icon name="ArrowRight" className="ml-1 w-4 h-4" />
                            </a>
                        </div>
                    </div>
                </div>
            );

            let layout;
            if (certifications.length < 4) {
                let gridClasses = "grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto";
                 if (certifications.length === 1) {
                    gridClasses = "flex justify-center max-w-md mx-auto";
                }
                layout = (
                    <div className={gridClasses}>
                        {certifications.map(renderCertification)}
                    </div>
                );
            } else {
                 layout = (
                    <>
                        <div className="relative">
                            <div className="overflow-hidden">
                                <div className={`grid grid-cols-1 md:grid-cols-2 gap-8 transition-all duration-300 ${animationClass}`}>
                                    {currentItems.map(renderCertification)}
                                </div>
                            </div>
                            {totalPages > 1 && currentPage > 1 && (
                                <button onClick={() => handlePageChange(currentPage - 1)} className="absolute top-1/2 -left-4 md:-left-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10">
                                    <Icon name="ArrowLeft" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                            {totalPages > 1 && currentPage < totalPages && (
                                <button onClick={() => handlePageChange(currentPage + 1)} className="absolute top-1/2 -right-4 md:-right-16 transform -translate-y-1/2 bg-white rounded-full p-2 shadow-lg hover:bg-stone-100 transition-colors z-10">
                                    <Icon name="ArrowRight" className="w-6 h-6 text-stone-700" />
                                </button>
                            )}
                        </div>
                        {totalPages > 1 && (
                            <div className="flex justify-center items-center mt-12 space-x-2">
                                {Array.from({ length: totalPages }).map((_, i) => (
                                    <button key={i} onClick={() => handlePageChange(i + 1)} className={`w-3 h-3 rounded-full transition-colors ${currentPage === i + 1 ? 'bg-teal-600' : 'bg-stone-300 hover:bg-stone-400'}`}></button>
                                ))}
                            </div>
                        )}
                    </>
                );
            }

            return (
                <section id="certifications" className="py-20 bg-white border-t border-stone-200">
                    <div className="container mx-auto px-6">
                        <h2 className="text-3xl font-bold text-center text-stone-800 mb-12">Certifications & Training</h2>
                        <div className="max-w-3xl mx-auto">
                            {layout}
                        </div>
                    </div>
                </section>
            );
        };
        
        const Contact = ({ email }) => (
            <section id="contact" className="py-20 bg-stone-50 text-center border-t border-stone-200">
                <div className="container mx-auto px-6">
                <h2 className="text-3xl font-bold text-center text-stone-800 mb-4">Let's Connect</h2>
                <p className="text-stone-600 mb-8 max-w-xl mx-auto">I'm currently open to new opportunities and collaborations. Feel free to reach out if you want to build something amazing together.</p>
                <a href={`mailto:${email}`} className="bg-teal-600 hover:bg-teal-700 text-white font-bold py-4 px-8 rounded-lg transition-transform transform hover:scale-105 inline-block">
                    Say Hello
                </a>
                </div>
            </section>
        );

        const Footer = ({ name }) => (
            <footer className="bg-white border-t border-stone-200">
                <div className="container mx-auto px-6 py-6 text-center text-stone-500">
                <p>&copy; {new Date().getFullYear()} {name}. All Rights Reserved.</p>
                </div>
            </footer>
        );

        // -- MAIN APP COMPONENT -- //
        const App = () => {
            const [portfolioData, setPortfolioData] = useState(null);

            useEffect(() => {
                const fetchData = async () => {
                    if (!db) {
                        console.error("Firestore is not initialized");
                        return;
                    }

                    try {
                        // Fetch main info
                        const mainInfoSnap = await db.collection("main_info").doc("details").get();
                        const mainInfo = mainInfoSnap.exists ? mainInfoSnap.data() : {};

                        // Fetch collections
                        const collectionsToFetch = ['achievements', 'projects', 'blogPosts', 'certifications', 'experience', 'skills'];
                        const collectionsData = {};

                        for (const coll of collectionsToFetch) {
                            const snapshot = await db.collection(coll).orderBy("order").get();
                            collectionsData[coll] = snapshot.docs.map(doc => doc.data());
                        }

                        setPortfolioData({ ...mainInfo, ...collectionsData });
                    } catch (error) {
                        console.error("Error fetching data from Firestore:", error);
                        // You could set some default data here in case of an error
                    }
                };

                if(db) {
                    fetchData();
                }
            }, []);

            if (!portfolioData) {
                 return (
                    <div className="min-h-screen flex items-center justify-center">
                        <dotlottie-wc 
                            src="https://lottie.host/445c027e-b5f6-42d2-8323-8c8da04ca745/nMRdj9O3gH.lottie" 
                            style={{ width: '200px', height: '200px' }} 
                            speed="1" 
                            autoplay 
                            loop>
                        </dotlottie-wc>
                    </div>
                );
            }

            return (
                <div className="bg-white">
                    <Header name={portfolioData.name} social={portfolioData.social} />
                    <main>
                        <Hero 
                            name={portfolioData.name} 
                            title={portfolioData.title} 
                            bio={portfolioData.bio} 
                            email={portfolioData.email}
                            skills={portfolioData.skills || []}
                            avatarUrl={portfolioData.avatarUrl}
                        />
                        <Achievements achievements={portfolioData.achievements || []} />
                        <PaginatedSection 
                            items={portfolioData.projects || []} 
                            renderItem={ProjectCard} 
                            sectionId="projects"
                            title="Featured Projects"
                            bgColor="bg-white"
                        />
                        <Experience experience={portfolioData.experience || []} />
                        <Certifications certifications={portfolioData.certifications || []} />
                        <Contact email={portfolioData.email} />
                    </main>
                    <Footer name={portfolioData.name} />
                </div>
            );
        }

        // This line finds the 'root' div and renders our App component into it using the new React 18 API.
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>

